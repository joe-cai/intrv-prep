/*
  ID:   caizhuo2
  PROG: game1
  LANG: C++
*/

#include <iostream>
#include <fstream>
#include <cstdlib>
#include <algorithm>
#include <vector>
#include <queue>
using namespace std;

int main() {
    ifstream cin("game1.in");
    ofstream cout("game1.out");
    
    int N;
    cin >> N;
    vector<int> board(N, 0);
    vector<vector<int>> max_scores(N, vector<int>(N, 0));
    for (int i = 0; i < N; i++) {
	cin >> board[i];
	max_scores[i][i] = board[i];
    }
    for (int l = 2; l <= N; l++) {
	for (int i = 0; i < N - l; i++) {
	    max_scores[i][i + l] = max(max_scores[i + 1][i + l - 1] + board[i],
				       max_scores[i][i + l - 2] + board[i]);
	}
    }
}
